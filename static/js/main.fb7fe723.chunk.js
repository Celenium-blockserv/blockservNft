(this["webpackJsonptruffle-client"]=this["webpackJsonptruffle-client"]||[]).push([[0],{220:function(e,t,n){},234:function(e,t){},236:function(e,t){},241:function(e,t){},242:function(e,t){},268:function(e,t){},270:function(e,t){},280:function(e,t){},282:function(e,t){},292:function(e,t){},294:function(e,t){},308:function(e,t){},411:function(e,t){},413:function(e,t){},418:function(e,t){},420:function(e,t){},427:function(e,t){},439:function(e,t){},442:function(e,t){},447:function(e,t){},533:function(e,t,n){},534:function(e,t,n){"use strict";n.r(t);var r=n(12),c=n.n(r),a=n(210),s=n.n(a),i=(n(220),Object(r.createContext)()),o=n(18),u=n(52),l=n(51),j=n(113),d=n.n(j),f=n(114),h="INIT",b={artifact:null,web3:null,accounts:null,networkID:null,contract:null},O=function(e,t){var n=t.type,r=t.data;if(n===h)return Object(f.a)(Object(f.a)({},e),r);throw new Error("Undefined reducer action type")},p=n(1);var x=function(e){var t=e.children,c=Object(r.useReducer)(O,b),a=Object(l.a)(c,2),s=a[0],j=a[1],f=Object(r.useCallback)(function(){var e=Object(u.a)(Object(o.a)().mark((function e(t){var n,r,c,a,s,i;return Object(o.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t){e.next=11;break}return n=new d.a(d.a.givenProvider||"ws://localhost:8545"),e.next=4,n.eth.requestAccounts();case 4:return r=e.sent,e.next=7,n.eth.net.getId();case 7:c=e.sent,a=t.abi;try{s=t.networks[c].address,i=new n.eth.Contract(a,s)}catch(o){console.error(o)}j({type:h,data:{artifact:t,web3:n,accounts:r,networkID:c,contract:i}});case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[]);return Object(r.useEffect)((function(){var e=function(){var e=Object(u.a)(Object(o.a)().mark((function e(){var t;return Object(o.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:try{t=n(!function(){var e=new Error("Cannot find module '../../contracts/SimpleStorage.json'");throw e.code="MODULE_NOT_FOUND",e}()),f(t)}catch(r){console.error(r)}case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();e()}),[f]),Object(r.useEffect)((function(){var e=["chainChanged","accountsChanged"],t=function(){f(s.artifact)};return e.forEach((function(e){return window.ethereum.on(e,t)})),function(){e.forEach((function(e){return window.ethereum.removeListener(e,t)}))}}),[f,s.artifact]),Object(p.jsx)(i.Provider,{value:{state:s,dispatch:j},children:t})},m=function(){return Object(r.useContext)(i)};var v=function(){return Object(p.jsxs)("div",{className:"welcome",children:[Object(p.jsx)("h1",{children:"\ud83d\udc4b Welcome to the Truffle + React Box!"}),Object(p.jsx)("p",{children:"This is everything you need to start using Truffle to write, compile, test, and deploy smart contracts, and interact with them from a React app."})]})};var g=function(){return Object(p.jsxs)("code",{children:[".\n","\u251c\u2500\u2500 client",Object(p.jsx)("span",{className:"primary-color",children:"   # React project (create-react-app)\n"}),"\u2514\u2500\u2500 truffle",Object(p.jsx)("span",{className:"primary-color",children:"  # Truffle project"})]})};var w=function(){return Object(p.jsxs)("p",{children:["This particular Box uses\xa0",Object(p.jsx)("a",{href:"https://github.com/ChainSafe/web3.js",target:"_blank",rel:"noreferrer",children:"web3.js"}),", a popular Ethereum library."]})};var y=function(){return Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)(v,{}),Object(p.jsx)(g,{}),Object(p.jsx)(w,{})]})};var k=function(){return Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)("h2",{children:"Preparation"}),Object(p.jsxs)("details",{children:[Object(p.jsx)("summary",{children:"Install"}),Object(p.jsx)("p",{children:"Install Truffle and Ganache globally."}),Object(p.jsx)("code",{children:"$ npm install -g truffle ganache"})]}),Object(p.jsxs)("details",{children:[Object(p.jsx)("summary",{children:"Ganache and MetaMask"}),Object(p.jsx)("p",{children:"Open a terminal and run Ganache, a simulated Ethereum blockchain on your machine."}),Object(p.jsx)("code",{children:"$ ganache"}),Object(p.jsx)("p",{children:"From the list of generated private keys, import the first one to MetaMask."})]}),Object(p.jsxs)("details",{children:[Object(p.jsx)("summary",{children:"Truffle"}),Object(p.jsx)("p",{children:"Keep Ganache running and open another terminal. Let's compile and deploy our contracts to Ganache."}),Object(p.jsxs)("code",{children:["$ cd truffle\n","$ truffle migrate --network development\n",Object(p.jsx)("span",{className:"dim-color",children:"# The `development` network points to Ganache, it's configured in truffle/truffle-config.js on line 45."})]})]})]})};var N=function(){return Object(p.jsx)("h2",{children:"See it in action"})};var T=function(){return Object(p.jsxs)("p",{children:["Try changing\xa0",Object(p.jsx)("span",{className:"code",children:"value"}),"\xa0in\xa0",Object(p.jsx)("span",{className:"code",children:"SimpleStorage"}),"."]})};var C=function(e){var t=e.value,n=Object(r.useRef)(null);return Object(r.useEffect)((function(){n.current.classList.add("flash");var e=setTimeout((function(){n.current.classList.remove("flash")}),300);return function(){clearTimeout(e)}}),[t]),Object(p.jsxs)("code",{children:["contract SimpleStorage {\n  uint256 value = ",Object(p.jsx)("span",{className:"secondary-color",ref:n,children:Object(p.jsx)("strong",{children:t})}),";\n\n  function read() public view returns (uint256) {\n    return value;\n  }\n\n  function write(uint256 newValue) public {\n    value = newValue;\n  }\n}"]})};var E=function(e){var t=e.setValue,n=m().state,c=n.contract,a=n.accounts,s=Object(r.useState)(""),i=Object(l.a)(s,2),j=i[0],d=i[1],f=function(){var e=Object(u.a)(Object(o.a)().mark((function e(){var n;return Object(o.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c.methods.read().call({from:a[0]});case 2:n=e.sent,t(n);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),h=function(){var e=Object(u.a)(Object(o.a)().mark((function e(t){var n;return Object(o.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("INPUT"!==t.target.tagName){e.next=2;break}return e.abrupt("return");case 2:if(""!==j){e.next=5;break}return alert("Please enter a value to write."),e.abrupt("return");case 5:return n=parseInt(j),e.next=8,c.methods.write(n).send({from:a[0]});case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(p.jsxs)("div",{className:"btns",children:[Object(p.jsx)("button",{onClick:f,children:"read()"}),Object(p.jsxs)("div",{onClick:h,className:"input-btn",children:["write(",Object(p.jsx)("input",{type:"text",placeholder:"uint",value:j,onChange:function(e){/^\d+$|^$/.test(e.target.value)&&d(e.target.value)}}),")"]})]})};var S=function(){return Object(p.jsxs)(p.Fragment,{children:[Object(p.jsxs)("p",{children:["Take a look at ",Object(p.jsx)("span",{className:"code",children:"client/src/contexts/EthContext"}),". This context maintains a global state and provides web3.js functionalities to the rest of the app."]}),Object(p.jsxs)("p",{children:["Feel free to remove any component or styling that you don't need, and extend ",Object(p.jsx)("span",{className:"code",children:"EthContext"})," to your dapp's needs."]}),Object(p.jsx)("p",{children:"Happy hacking!"})]})};var I=function(){return Object(p.jsxs)("p",{children:["\u26a0\ufe0f Cannot find ",Object(p.jsx)("span",{className:"code",children:"SimpleStorage"})," contract artifact. Please complete the above preparation first, then restart the react dev server."]})};var M=function(){return Object(p.jsx)("p",{children:"\u26a0\ufe0f MetaMask is not connected to the same network as the one you deployed to."})};var F=function(){var e=m().state,t=Object(r.useState)("?"),n=Object(l.a)(t,2),c=n[0],a=n[1],s=Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)(T,{}),Object(p.jsxs)("div",{className:"contract-container",children:[Object(p.jsx)(C,{value:c}),Object(p.jsx)(E,{setValue:a})]}),Object(p.jsx)(S,{})]});return Object(p.jsxs)("div",{className:"demo",children:[Object(p.jsx)(N,{}),e.artifact?e.contract?s:Object(p.jsx)(M,{}):Object(p.jsx)(I,{})]})};function R(e){var t=e.uri,n=e.text;return Object(p.jsx)("a",{href:t,target:"_blank",rel:"noreferrer",children:n})}var G=function(){return Object(p.jsxs)("footer",{children:[Object(p.jsx)("h2",{children:"More resources"}),Object(p.jsx)(R,{uri:"https://trufflesuite.com",text:"Truffle"}),Object(p.jsx)(R,{uri:"https://reactjs.org",text:"React"}),Object(p.jsx)(R,{uri:"https://soliditylang.org",text:"Solidity"}),Object(p.jsx)(R,{uri:"https://ethereum.org",text:"Ethereum"})]})};n(533);var P=function(){return Object(p.jsx)(x,{children:Object(p.jsx)("div",{id:"App",children:Object(p.jsxs)("div",{className:"container",children:[Object(p.jsx)(y,{}),Object(p.jsx)("hr",{}),Object(p.jsx)(k,{}),Object(p.jsx)("hr",{}),Object(p.jsx)(F,{}),Object(p.jsx)("hr",{}),Object(p.jsx)(G,{})]})})})};s.a.createRoot(document.getElementById("root")).render(Object(p.jsx)(c.a.StrictMode,{children:Object(p.jsx)(P,{})}))}},[[534,1,2]]]);
//# sourceMappingURL=main.fb7fe723.chunk.js.map